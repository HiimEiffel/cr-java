package com.tarik02.clashroyale.server.protocol.messages.server;

import com.tarik02.clashroyale.server.protocol.Info;
import com.tarik02.clashroyale.server.protocol.messages.Message;
import com.tarik02.clashroyale.server.protocol.messages.component.HomeChest;
import com.tarik02.clashroyale.server.utils.DataStream;
import com.tarik02.clashroyale.server.utils.Hex;

public class OwnHomeData extends Message {
	public static final short ID = Info.OWN_HOME_DATA;

	public long homeId;
	public String name;
	public int coins;
	public int gems;
	public int trophies;
	public int level;
	public int levelExperience;

	public String cardReleases; // JSON
	public String shopData; // JSON

	public HomeChest homeChests[];

	public OwnHomeData() {
		super(ID);

		homeId = 0;
		name = "";
		coins = 0;
		gems = 0;
		trophies = 0;
		level = 1;
		levelExperience = 0;

		cardReleases = "{\"ID\":\"CARD_RELEASE\",\"Params\":{\"Assassin\":\"20170324\"}}";
		shopData = "{\"Title\":\"Акция: мушкетер\",\"Subtitle\":\"Ограниченное предложение: ОДНА покупка!\",\"ShopOffers\":[{\"Rewards\":[{\"Type\":\"spell\",\"Amount\":12,\"Spell\":\"Musketeer\"}],\"Title\":\"Мушкетер\",\"Image\":{\"Path\":\"\\/beb549d758347b86f828e8663ded335f_shop_musketeer_stack_01.png\",\"Checksum\":\"beb549d758347b86f828e8663ded335f\",\"File\":\"shop_musketeer_stack_01.png\"},\"CostType\":\"gems\",\"Cost\":50,\"Template\":\"shop_item2_no_text\"},{\"Rewards\":[{\"Type\":\"spell\",\"Amount\":100,\"Spell\":\"Musketeer\"}],\"Title\":\"Мушкетер\",\"Image\":{\"Path\":\"\\/a75e1bd56828a1dab108fba1f8f661ed_shop_musketeer_stack_02.png\",\"Checksum\":\"a75e1bd56828a1dab108fba1f8f661ed\",\"File\":\"shop_musketeer_stack_02.png\"},\"CostType\":\"gems\",\"Cost\":380,\"Template\":\"shop_item2_no_text\"}]}";
		homeChests = new HomeChest[4];
		homeChests[1] = new HomeChest();
		homeChests[1].status = HomeChest.STATUS_OPENING;
		homeChests[1].ticksToOpen = 3 * 60 * 20 - 120;
		homeChests[1].openTicks = 3 * 60 * 20;
	}

	@Override
	public void encode(DataStream stream) {
		super.encode(stream);

		if (homeChests.length != 4) {
			throw new RuntimeException("homeChests.length must be 4");
		}

		stream.putBLong(homeId);
		stream.put(Hex.toByteArray("1201BC865DB0F6D2")); // Somebody says that it is timestamp, but when i tried to print some timestamp, client crashes
		stream.put(Hex.toByteArray("019995DD8F0B00030880EAE51881EAE5188DEAE51881FCD91A80FCD91A83EAE5188EEAE51882EAE5180880EAE51881EAE5188DEAE51881FCD91A80FCD91A83EAE51800000880EAE51881EAE5188DEAE51881FCD91A80FCD91A83EAE5180000FF01010000000000020000020100010E00000201000182010000040300018101000001000000040000010000000F008E8EDD17020200030300918EDD1701010002000000007F7FB2D8D28F0B01000322000000154D75736B657465657220537461636B204F6666657201909CB98F0B90E2C38F0B909CB98F0B0000000000000000000000154D75736B657465657220537461636B204F66666572")); // Unknown
		stream.putString(shopData);
		stream.put(Hex.toByteArray("23000000184D75736B65746565722043617264204368616C6C656E676502909CB98F0B90E2C38F0B909CB98F0B0000000000000000000000184D75736B65746565722043617264204368616C6C656E6765000003E77B2247616D654D6F6465223A224361726452656C656173654472616674222C225469746C65223A22D09CD0B8D0BDD0B82DD0B8D181D0BFD18BD182D0B0D0BDD0B8D0B520D09CD183D188D0BAD0B5D182D0B5D180222C224A6F696E436F7374223A31302C224A6F696E436F73745265736F75726365223A2247656D73222C224D61784C6F73736573223A332C2252657761726473223A5B7B22476F6C64223A3133302C224361726473223A327D2C7B22476F6C64223A3138302C224D696C6573746F6E65223A7B2254797065223A225370656C6C222C22416D6F756E74223A332C225370656C6C223A224D75736B6574656572227D2C224361726473223A337D2C7B22476F6C64223A3234302C224D696C6573746F6E65223A7B2254797065223A225370656C6C222C22416D6F756E74223A352C225370656C6C223A224D75736B6574656572227D2C224361726473223A357D2C7B22476F6C64223A3331302C224D696C6573746F6E65223A7B2254797065223A225370656C6C222C22416D6F756E74223A382C225370656C6C223A224D75736B6574656572227D2C224361726473223A387D5D2C2249636F6E4578706F72744E616D65223A2269636F6E5F746F75726E616D656E745F636172645F72656C65617365222C2257696E49636F6E4578706F72744E616D65223A22746F75726E616D656E745F6F70656E5F77696E735F62616467655F6472616674222C224172656E61223A22416C6C222C224D696C6573746F6E65486967686C69676874496E5549223A332C225375627469746C65223A22222C224465736372697074696F6E223A22D092D18BD0B8D0B3D180D0B0D0B9D182D0B5203320D180D0B0D0B7D0B020D0B4D0BBD18F20D0BFD0BED0B1D0B5D0B4D18B2120D09AD0B0D180D182D18B20D0B220D0BDD0B0D0B3D180D0B0D0B4D18320D0B7D0B020D0B4D0BED181D182D0B8D0B6D0B5D0BDD0B8D18F2E222C2253746172744E6F74696669636174696F6E223A22D09DD0B020D0BCD0B8D0BDD0B82DD0B8D181D0BFD18BD182D0B0D0BDD0B8D0B520D0B820D0BFD0BED0BAD183D0BFD0BAD18320D0BAD0BED0BBD0BED0B420D0BAD0B0D180D18220D0B4D0B0D0B5D182D181D18F20323420D187D0B0D181D0B02E222C22456E644E6F74696669636174696F6E223A22D094D0B2D0B020D187D0B0D181D0B020D0B4D0BE20D0BED0BAD0BED0BDD187D0B0D0BDD0B8D18F20D0BCD0B8D0BDD0B82DD0B8D181D0BFD18BD182D0B0D0BDD0B8D18F20D0B820D0BFD180D0BED0B4D0B0D0B6D0B820D0BAD0BED0BBD0BED0B420D0B220D0BCD0B0D0B3D0B0D0B7D0B8D0BDD0B52E222C22436172645468656D65223A224D75736B6574656572222C224672656550617373223A307D1F0000001445706963204368616C6C656E67652046696E616C02B0CD838F0BB09FA38F0BA8E7F18E0B00000000000000000000001445706963204368616C6C656E67652046696E616C000004477B2247616D654D6F6465223A224368616C6C656E6765222C225469746C65223A22D0ADD0BFD0B8D187D0B5D181D0BAD0BED0B520D0B8D181D0BFD18BD182D0B0D0BDD0B8D0B5222C224672656550617373223A312C224A6F696E436F7374223A31302C224A6F696E436F73745265736F75726365223A2247656D73222C224D61784C6F73736573223A332C2252657761726473223A5B7B22476F6C64223A3133302C224361726473223A327D2C7B22476F6C64223A3138302C224361726473223A337D2C7B22476F6C64223A3234302C224361726473223A357D2C7B22476F6C64223A3331302C224D696C6573746F6E65223A7B2254797065223A2252616E646F6D5370656C6C222C22416D6F756E74223A332C2252616E646F6D5370656C6C223A2245706963227D2C224361726473223A387D2C7B22476F6C64223A3339302C224361726473223A31327D2C7B22476F6C64223A3438302C224361726473223A31377D2C7B22476F6C64223A3630302C224D696C6573746F6E65223A7B2254797065223A2252616E646F6D5370656C6C222C22416D6F756E74223A362C2252616E646F6D5370656C6C223A2245706963227D2C224361726473223A32357D2C7B22476F6C64223A3733302C224361726473223A33347D2C7B22476F6C64223A3835302C224361726473223A34357D2C7B22476F6C64223A313130302C224D696C6573746F6E65223A7B2254797065223A2252616E646F6D5370656C6C222C22416D6F756E74223A392C2252616E646F6D5370656C6C223A2245706963227D2C224361726473223A36307D5D2C2249636F6E4578706F72744E616D65223A2269636F6E5F746F75726E616D656E745F676F6C64222C2257696E49636F6E4578706F72744E616D65223A22746F75726E616D656E745F6F70656E5F77696E735F62616467655F676F6C64222C224172656E61223A22416C6C222C224D696C6573746F6E65486967686C69676874496E5549223A392C225375627469746C65223A22D092D180D0B5D0BCD18F20D18DD0BFD0B8D187D0B5D181D0BAD0B8D18520D0B1D0B8D182D0B221222C224465736372697074696F6E223A22D092D18BD0B8D0B3D180D0B0D0B9D182D0B5203920D180D0B0D0B720D0B4D0BBD18F20D0BFD0BED0B1D0B5D0B4D18B20D0B220D0B8D181D0BFD18BD182D0B0D0BDD0B8D0B82120D09FD0BED0BBD183D187D0B8D182D0B520D18DD0BFD0B8D187D0B5D181D0BAD0B8D0B520D0BAD0B0D180D182D18B20D0B7D0B020D0B4D0BED181D182D0B8D0B6D0B5D0BDD0B8D18F2E222C2253746172744E6F74696669636174696F6E223A22D098D0B4D0B5D18220D18DD0BFD0B8D187D0B5D181D0BAD0BED0B520D0B8D181D0BFD18BD182D0B0D0BDD0B8D0B521222C22456E644E6F74696669636174696F6E223A22D0ADD0BFD0B8D187D0B5D181D0BAD0BED0B520D0B8D181D0BFD18BD182D0B0D0BDD0B8D0B53A20D0BED181D182D0B0D0BBD0BED181D18C203220D187D0B0D181D0B0227D0000000000007F00000003220123011F05"));

		stream.putString(cardReleases);

		stream.put(Hex.toByteArray("00"));
		stream.put(Hex.toByteArray("04011303"));

		homeChests[1].encode(stream);

		stream.put(Hex.toByteArray("0D06000000041304000F06010000041303000806020000041302000A060300000000007F00007F01130C0111007F0000000000000000000000000000BC865DB0F6D2019995DD8F0BBC865DB0F6D2019995DD8F0B0000007F0F0000000000000002013601D4DCF3F6050706B4E28A01B4E28A01BFB9DF8F0B03018201020000000000001C0100018201020000000000001A0D01018201020000000000001C07020000007F00007F00007F01000000000000000000000900000000F80101000001000000020000010000000E000001000000820100000100000081010000010000000400000100000001AEEAE51801AEEAE5180000000001B08FA68D0B000001018AE6BF3300000000000000359BE5B202359BE5B202359BE5B202"));

		stream.putString(name);
		stream.put(Hex.toByteArray("0002"));
		stream.putRrsInt32(trophies);
		stream.put(Hex.toByteArray(/*"00"*/"000000000000001E000000000007080501"));
		stream.putRrsInt32(coins);
		stream.put(Hex.toByteArray("0502070503040505BB02050D00050E06051002051D8888D54400063C04013C05013C06013C07083C08083C09080003050808050B1E051B01061A00051A01081A03071A0D0A1A0E021C000200"));
		stream.putRrsInt32(gems);
		stream.put(Hex.toByteArray("01"));
		stream.putRrsInt32(levelExperience);
		stream.putRrsInt32(level);
		stream.put(Hex.toByteArray("01000100000000000007000000D1C1C2CB02B6C1D88F0B89EA5E"));
	}

	@Override
	public void decode(DataStream stream) {
		super.decode(stream);
	}
}
